// Minified, functionally equivalent version. See main.js for full logic.
document.addEventListener("DOMContentLoaded",function(){function c(t){navigator.clipboard.writeText(t).catch(function(){});}function f(e,t="Copiat"){let n=document.createElement("div");n.className="copy-bubble",n.innerText=t,document.body.appendChild(n);let r=e.getBoundingClientRect();n.style.left=r.left+r.width/2+window.scrollX+"px",n.style.top=r.top+window.scrollY-4+"px",setTimeout(function(){n.classList.add("show");},10),setTimeout(function(){n.classList.remove("show"),setTimeout(function(){n.remove();},180);},1200);}function d(e){return(e.getAttribute("data-value")||e.innerText||"").replace(/\s+/g," ").trim();}function h(e){return Array.from(e.querySelectorAll("td")).map(d).join("\t");}let l=null;function m(){l&&(l.remove(),l=null),document.removeEventListener("mousedown",m,!0),document.removeEventListener("scroll",m,!0),document.removeEventListener("keydown",k,!0);}function k(e){if("Escape"===e.key)m();}function g(e,t){m(),l=document.createElement("div"),l.className="context-menu",l.innerHTML='<div class="item" data-act="cell">Copiază celula</div><div class="item" data-act="row">Copiază rândul</div>',document.body.appendChild(l);let n=e.clientX,r=e.clientY,a=180,o=80;n+a>window.innerWidth&&(n=window.innerWidth-a-6),r+o>window.innerHeight&&(r=window.innerHeight-o-6),l.style.left=n+"px",l.style.top=r+"px",l.querySelector("[data-act=cell]").onclick=function(){c(d(t)),f(t),m();},l.querySelector("[data-act=row]").onclick=function(){c(Array.from(t.parentElement.querySelectorAll("td")).filter(function(td){return td.offsetParent!==null&&td.style.display!=="none";}).map(d).join("\t")),f(t.parentElement),m();},setTimeout(function(){document.addEventListener("mousedown",m,!0),document.addEventListener("scroll",m,!0),document.addEventListener("keydown",k,!0);},10);}function S(e){if(e.hasAttribute("data-copy-handler"))return;e.setAttribute("data-copy-handler","1"),e.addEventListener("dblclick",function(t){c(d(e)),f(e),t.preventDefault();}),e.addEventListener("contextmenu",function(t){t.preventDefault(),g(t,e);});let t=null;e.addEventListener("touchstart",function(){t&&clearTimeout(t),t=setTimeout(function(){c(d(e)),f(e);},600);},{passive:!0}),e.addEventListener("touchend",function(){t&&clearTimeout(t);}),e.addEventListener("touchcancel",function(){t&&clearTimeout(t);});}function p(){document.querySelectorAll("table.table").forEach(function(e){if(!e.closest(".table-responsive")){let t=document.createElement("div");t.className="table-responsive",e.parentNode.insertBefore(t,e),t.appendChild(e);}e.classList.add("table-sticky-header");});}function b(){document.querySelectorAll("table.table tbody td").forEach(S);}function y(){if("1"===localStorage.getItem("coach:copy"))return;const e=document.querySelector(".table");if(!e)return;let t=document.createElement("div");t.className="coachmark-copy",t.innerHTML='<span><i class="fas fa-mouse-pointer"></i> Dublu-click pentru a copia celula. Click dreapta pentru opțiuni.</span><button class="close" tabindex="0">&times;</button>';let n=e.closest(".table-responsive")?.parentElement||e.parentElement;n.insertBefore(t,e.closest(".table-responsive")||e),t.querySelector(".close").onclick=function(){t.remove(),localStorage.setItem("coach:copy","1");};}function w(e){const t=e.querySelector("thead"),n=e.querySelector("tbody");if(!(t&&n))return;const r=document.createElement("div");r.className="table-tools d-flex flex-wrap align-items-center gap-2 mb-2";const a=document.createElement("input");a.className="form-control form-control-sm table-filter-input",a.type="search",a.placeholder="Filtrează rânduri (Shift+F)",a.autocomplete="off",r.appendChild(a);const o=document.createElement("button");o.className="btn btn-outline-secondary btn-sm",o.type="button",o.title="Comută densitatea tabelului",o.innerHTML='<i class="fas fa-compress-arrows-alt"></i>',o.addEventListener("click",function(){e.classList.toggle("table-compact");}),r.appendChild(o);const s=document.createElement("div");s.className="dropdown d-inline-block",s.innerHTML='<button class="btn btn-outline-secondary btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown">Coloane</button><div class="dropdown-menu p-2 columns-menu" style="min-width: 220px;"></div>';const i=s.querySelector(".columns-menu");r.appendChild(s);const u=e.closest(".table-responsive");u&&u.parentElement?u.parentElement.insertBefore(r,u):e.parentElement.insertBefore(r,e);const v=Array.from(t.querySelectorAll("th")),C="columns:"+location.pathname;let R=v.map(function(){return!0;});try{const E=JSON.parse(localStorage.getItem(C)||"null");Array.isArray(E)&&E.length===R.length&&(R=E);}catch(e){}function j(){Array.from(e.querySelectorAll("tr")).forEach(function(n){v.forEach(function(r,a){const o=n.children[a];o&&(o.style.display=R[a]?"":"none");});});}function O(){try{localStorage.setItem(C,JSON.stringify(R));}catch(e){}}v.forEach(function(t,n){const r=document.createElement("label");r.className="dropdown-item d-flex align-items-center gap-2";const a=document.createElement("input");a.type="checkbox",a.className="form-check-input",a.checked=R[n],a.addEventListener("change",function(){R[n]=a.checked,j(),O();}),r.appendChild(a);const o=document.createElement("span");o.textContent=(t.innerText||t.textContent||`Col ${n+1}`).trim()||`Col ${n+1}`,r.appendChild(o),i.appendChild(r);}),j();a.addEventListener("input",function(){const t=a.value.trim().toLowerCase(),n=Array.from(n.querySelectorAll("tr"));if(!t)return void n.forEach(function(r){r.style.display="";});n.forEach(function(r){const a=(r.innerText||"").toLowerCase();r.style.display=a.includes(t)?"":"none";});}),document.addEventListener("keydown",function(e){e.shiftKey&&!e.ctrlKey&&!e.altKey&&"f"===e.key.toLowerCase()&&(a.focus(),e.preventDefault());});const F=document.createElement("button");F.className="btn btn-outline-secondary btn-sm",F.type="button",F.title="Copiază tabelul vizibil",F.innerHTML='<i class="fas fa-copy"></i> Copiază tabelul',F.addEventListener("click",function(){let t=[],n=[];v.forEach(function(r,a){r.offsetParent!==null&&r.style.display!=="none"&&!/ac.tiuni/i.test(r.innerText)&&n.push((r.innerText||"").trim());}),t.push(n.join("\t")),Array.from(e.querySelectorAll("tbody tr")).forEach(function(r){if("none"===r.style.display)return;let a=[];Array.from(r.children).forEach(function(o,s){o.offsetParent!==null&&o.style.display!=="none"&&a.push(d(o));}),a.length&&t.push(a.join("\t"));}),c(t.join("\n")),f(F,"Tabel copiat");}),r.appendChild(F);}
document.querySelectorAll("table.table").forEach(w),b(),y();});