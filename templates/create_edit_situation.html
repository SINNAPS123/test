{% extends "base.html" %}

{% block title %}{{ situation and 'Editează Situație' or 'Creează Situație' }}{% endblock %}

{% block content %}
<h2 class="mb-3">
  <i class="fas fa-clipboard-list me-2"></i>
  {{ situation and 'Editează Situație' or 'Creează Situație' }}
</h2>

<form method="POST">
  <div class="mb-3">
    <label class="form-label">Titlu *</label>
    <input type="text" class="form-control" name="title" value="{{ form_data.title or '' }}" required>
  </div>
  <div class="mb-3">
    <label class="form-label">Descriere</label>
    <textarea class="form-control" name="description" rows="2">{{ form_data.description or '' }}</textarea>
  </div>

  {% if situation %}
  <div class="form-check form-switch mb-3">
    <input class="form-check-input" type="checkbox" id="is_active" name="is_active" {% if form_data.is_active %}checked{% endif %}>
    <label class="form-check-label" for="is_active">Activă</label>
  </div>
  {% endif %}

  <div class="mb-2">
    <label class="form-label">Schema câmpuri (JSON - listă de obiecte)</label>
    <textarea class="form-control" name="fields_schema" rows="12">{{ form_data.fields_schema or '' }}</textarea>
    <div class="form-text">
      Exemplu:
      <pre class="mb-0" style="white-space: pre-wrap;">[
  {"name":"student_name","label":"Nume student","type":"text","required":true},
  {"name":"date","label":"Data","type":"date","required":true},
  {"name":"start_time","label":"Ora început","type":"time","required":false},
  {"name":"end_time","label":"Ora sfârșit","type":"time","required":false},
  {"name":"details","label":"Detalii","type":"textarea","required":false}
]</pre>
      Tipuri suportate: text, textarea, date, time, select (cu "options": ["opt1","opt2"]).
    </div>
  </div>

  <div class="d-flex gap-2">
    <button type="submit" class="btn btn-primary"><i class="fas fa-save me-2"></i> Salvează</button>
    <a href="{{ url_for('list_situations') }}" class="btn btn-secondary">Înapoi</a>
  </div>
</form>
{% endblock %}